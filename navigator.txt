# add subtle noise to navigator
spoofnavigator.js application/javascript
(function() {
	const domLoaded = (fn) => document.readyState != 'loading'?
    	fn(): document.addEventListener('DOMContentLoaded', fn)
	const evenRand = (min, max) =>
		(Math.floor(Math.random() * ((max/2) - min + 1)) + min)*2
	const rand = (min, max) =>
		(Math.floor(Math.random() * (max - min + 1)) + min)
	const props = {
		mimeTypes: undefined,
		plugins: undefined,
		maxTouchPoints: rand(0, 1000),
		hardwareConcurrency: rand(1, 1000),
		deviceMemory: evenRand(2, 1000),
	}
	const hash = [
		props.maxTouchPoints,
		props.hardwareConcurrency,
		props.deviceMemory
	].join('.')
	const watcher = function(prop) {
		const style = `padding:2px;border:2px solid green;color:green;background:#c9f3c92e;`
		console.log(`%cSpoofing ${prop} in new hash (${hash}): ${props[prop]}`, style)
		return
	}
	// difinify
	function definify(props) {
		const redefinedProps = {}
		Object.keys(props).forEach(prop => {
			redefinedProps[prop] = { value: (()=> { watcher(prop);return props[prop] })() }
		})
		return redefinedProps
	}
	function redefine(root) {
		Object.defineProperties(root.navigator, definify(props))
	}
	redefine(window)
})()
