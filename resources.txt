# random canvas fingerprint
randomcanvas.js application/javascript
(function() {
	const canvas = window.document.createElement('canvas')
	const sampleDataURI = canvas.toDataURL()
	const parameters = `${sampleDataURI.split(/[,]/)[0]},`
	const randomizedData = sampleDataURI.split('').sort(() => 0.5-Math.random()).join('')
	const newDataURI = parameters+randomizedData
	const cache = function(newDataURI) {
		return (typeOfAttempt='') => () => {
			console.warn('🐳 '+typeOfAttempt+HTMLCanvasElement.toDataURL accessed: '+newDataURI)
			return newDataURI
		}
	}
	const randomcanvas = cache(newDataURI)
	// Handle window
	Object.defineProperty(
		HTMLCanvasElement.prototype,
		'toDataURL', { 
			value: randomcanvas()
		}
	)
	// Handle iframes
	const iframeCollection = document.getElementsByTagName('iframe')
	;[...iframeCollection].forEach(iframe => {
		Object.defineProperty(
			iframe.contentWindow.HTMLCanvasElement.prototype,
			'toDataURL', { 
				value: randomcanvas('😡Aggressive - ')
			}
		)
	})
})()
